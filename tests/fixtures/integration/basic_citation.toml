name = "Basic citation with author-date style"
test_type = "integration"

markdown = """
Les résultats montrent [@item-1] que la méthode fonctionne.
"""

refs = """
[{"id": "item-1", "type": "book", "author": [{"family": "Doe", "given": "John"}], "title": "Test Book", "issued": {"date-parts": [[2021]]}}]
"""

style = """
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0">
  <info>
    <id>test-style</id>
    <title>Test Style</title>
    <updated>2024-01-01T00:00:00+00:00</updated>
  </info>
  <citation>
    <layout prefix="(" suffix=")" delimiter="; ">
      <names variable="author">
        <name form="short"/>
      </names>
      <date prefix=", " variable="issued"><date-part name="year"/></date>
    </layout>
  </citation>
  <bibliography>
    <layout>
      <names variable="author"><name name-as-sort-order="all"/></names>
      <text prefix=". " variable="title" font-style="italic"/>
      <date prefix=" (" suffix=")." variable="issued"><date-part name="year"/></date>
    </layout>
  </bibliography>
</style>
"""

expected = """
Les résultats montrent (Doe, 2021) que la méthode fonctionne.

## References

<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. <i>Test Book</i> (2021).</div>
</div>
"""
